'use strict';

var bikeApp = {};

bikeApp.stations = [];

bikeApp.events = function () {

    $.ajax({
        url: 'http://api.citybik.es/v2/networks/toronto',
        method: 'GET',
        dataType: 'json',
        data: {
            format: 'json'
        }
    }).then(function (res) {
        var bikeData = res.network.stations;
        bikeApp.populateList(bikeData);
    });

    $('#bikeResponse').css('display', 'none');
};

bikeApp.populateList = function (bikeData) {
    bikeData.forEach(function (station) {
        options.data.push(station.name);

        bikeApp.stations.push(station);
    });
};

bikeApp.formEvent = function (station) {

    $('form').on('submit', function (e) {

        var usersInput = $('.usersLocay').val();

        e.preventDefault();

        bikeApp.displayData(usersInput);
    });

    $('.submitBtn').click(function () {

        var geoLocay = bikeApp.stations.filter(function (bikestop) {
            return bikestop.name === $('.usersLocay').val();
        });

        var googleCoord = {
            lat: geoLocay[0].latitude,
            lng: geoLocay[0].longitude
        };

        $('#landingPage').css('display', 'none');

        $('#bikeResponse').css('display', 'block');

        var googleProps = {
            center: googleCoord,
            zoom: 19
        };

        var map = void 0;
        map = new google.maps.Map(document.getElementById('map'), googleProps);
        var marker = new google.maps.Marker({
            position: googleCoord,
            map: map,
            title: geoLocay.name
        });

        $('#map').append(map);
    });
};

bikeApp.displayData = function (usersInput, e) {

    var usersInput = usersInput;

    bikeApp.stations.forEach(function (station) {

        if (usersInput === station.name) {

            $('.choosenStation').html('' + station.name);

            $('.freeBikes').html('' + station.empty_slots);

            $('.emptySlots').html('' + station.free_bikes);
        }
    });

    bikeApp.resetBtnFunction();
};

bikeApp.resetBtnFunction = function () {

    $('.findAnother').click(function () {

        $('#landingPage').css('display', 'block');

        $('#bikeResponse').css('display', 'none');
    });
};

var options = {
    data: [],
    list: {
        match: {
            enabled: true
        }
    }
};

$("#match").easyAutocomplete(options);

bikeApp.init = function () {
    bikeApp.events();
    bikeApp.formEvent();
};

$(function () {
    bikeApp.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiYmlrZUFwcCIsInN0YXRpb25zIiwiZXZlbnRzIiwiJCIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhVHlwZSIsImRhdGEiLCJmb3JtYXQiLCJ0aGVuIiwicmVzIiwiYmlrZURhdGEiLCJuZXR3b3JrIiwicG9wdWxhdGVMaXN0IiwiY3NzIiwiZm9yRWFjaCIsInN0YXRpb24iLCJvcHRpb25zIiwicHVzaCIsIm5hbWUiLCJmb3JtRXZlbnQiLCJjb25zb2xlIiwibG9nIiwib24iLCJlIiwidXNlcnNJbnB1dCIsInZhbCIsInByZXZlbnREZWZhdWx0IiwiZGlzcGxheURhdGEiLCJjbGljayIsImdlb0xvY2F5IiwiZmlsdGVyIiwiYmlrZXN0b3AiLCJnb29nbGVDb29yZCIsImxhdCIsImxhdGl0dWRlIiwibG5nIiwibG9uZ2l0dWRlIiwiZ29vZ2xlUHJvcHMiLCJjZW50ZXIiLCJ6b29tIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwiYXBwZW5kIiwiaHRtbCIsImVtcHR5X3Nsb3RzIiwiZnJlZV9iaWtlcyIsInJlc2V0QnRuRnVuY3Rpb24iLCJsaXN0IiwibWF0Y2giLCJlbmFibGVkIiwiZWFzeUF1dG9jb21wbGV0ZSIsImluaXQiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsVUFBVSxFQUFkOztBQUVBQSxRQUFRQyxRQUFSLEdBQW1CLEVBQW5COztBQUVBRCxRQUFRRSxNQUFSLEdBQWlCLFlBQVk7O0FBRXpCQyxNQUFFQyxJQUFGLENBQU87QUFDSEMsYUFBSywyQ0FERjtBQUVIQyxnQkFBUSxLQUZMO0FBR0hDLGtCQUFVLE1BSFA7QUFJSEMsY0FBTTtBQUNGQyxvQkFBUTtBQUROO0FBSkgsS0FBUCxFQU9HQyxJQVBILENBT1EsVUFBVUMsR0FBVixFQUFlO0FBQ25CLFlBQUlDLFdBQVdELElB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OztBQUVuQ3JELE1BQUUsY0FBRixFQUFrQjJCLEtBQWxCLENBQXdCLFlBQVk7O0FBRWhDM0IsVUFBRSxjQUFGLEVBQWtCWSxHQUFsQixDQUFzQixTQUF0QixFQUFpQyxPQUFqQzs7QUFFQVosVUFBRSxlQUFGLEVBQW1CWSxHQUFuQixDQUF1QixTQUF2QixFQUFrQyxNQUFsQztBQUNILEtBTEQ7QUFPSCxDQVREOztBQVdBLElBQUlHLFVBQVU7QUFDVlYsVUFBTSxFQURJO0FBRVZpRCxVQUFNO0FBQ0ZDLGVBQU87QUFDSEMscUJBQVM7QUFETjtBQURMO0FBRkksQ0FBZDs7QUFTQXhELEVBQUUsUUFBRixFQUFZeUQsZ0JBQVosQ0FBNkIxQyxPQUE3Qjs7QUFHQWxCLFFBQVE2RCxJQUFSLEdBQWUsWUFBWTtBQUN2QjdELFlBQVFFLE1BQVI7QUFDQUYsWUFBUXFCLFNBQVI7QUFDSCxDQUhEOztBQU9BbEIsRUFBRSxZQUFZO0FBQ1ZILFlBQVE2RCxJQUFSO0FBQ0gsQ0FGRCIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJpa2VBcHAgPSB7fTtcblxuYmlrZUFwcC5zdGF0aW9ucyA9IFtdO1xuXG5iaWtlQXBwLmV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJ2h0dHA6Ly9hcGkuY2l0eWJpay5lcy92Mi9uZXR3b3Jrcy90b3JvbnRvJyxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZm9ybWF0OiAnanNvbidcbiAgICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBsZXQgYmlrZURhdGEgPSByZXMubmV0d29yay5zdGF0aW9ucztcbiAgICAgICAgYmlrZUFwcC5wb3B1bGF0ZUxpc3QoYmlrZURhdGEpO1xuICAgIH0pO1xuXG4gICAgJCgnI2Jpa2VSZXNwb25zZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XG5cbn1cblxuYmlrZUFwcC5wb3B1bGF0ZUxpc3QgPSBmdW5jdGlvbiAoYmlrZURhdGEpIHtcbiAgICBiaWtlRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0aW9uKSB7XG4gICAgICAgIG9wdGlvbnMuZGF0YS5wdXNoKHN0YXRpb24ubmFtZSk7XG5cbiAgICAgICAgYmlrZUFwcC5zdGF0aW9ucy5wdXNoKHN0YXRpb24pO1xuICAgIH0pO1xuXG59O1xuXG5iaWtlQXBwLmZvcm1FdmVudCA9IGZ1bmN0aW9uIChzdGF0aW9uKSB7XG5cbiAgICBjb25zb2xlLmxvZygnaGknKTtcblxuICAgICQoJ2Zvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICB2YXIgdXNlcnNJbnB1dCA9ICQoJy51c2Vyc0xvY2F5JykudmFsKCk7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGJpa2VBcHAuZGlzcGxheURhdGEodXNlcnNJbnB1dCk7XG5cblxuICAgIH0pO1xuXG4gICAgJCgnLnN1Ym1pdEJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBsZXQgZ2VvTG9jYXkgPSBiaWtlQXBwLnN0YXRpb25zLmZpbHRlcihmdW5jdGlvbiAoYmlrZXN0b3ApIHtcbiAgICAgICAgICAgIHJldHVybiBiaWtlc3RvcC5uYW1lID09PSAkKCcudXNlcnNMb2NheScpLnZhbCgpO1xuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGdlb0xvY2F5KTtcblxuICAgICAgICBsZXQgZ29vZ2xlQ29vcmQgPSB7XG4gICAgICAgICAgICBsYXQ6IGdlb0xvY2F5WzBdLmxhdGl0dWRlLFxuICAgICAgICAgICAgbG5nOiBnZW9Mb2NheVswXS5sb25naXR1ZGVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGdvb2dsZUNvb3JkKTtcblxuICAgICAgICAkKCcjbGFuZGluZ1BhZ2UnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuXG4gICAgICAgICQoJyNiaWtlUmVzcG9uc2UnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuICAgICAgICBsZXQgZ29vZ2xlUHJvcHMgPSB7XG4gICAgICAgICAgICBjZW50ZXI6IGdvb2dsZUNvb3JkLFxuICAgICAgICAgICAgem9vbTogMTlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtYXA7XG4gICAgICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCBnb29nbGVQcm9wcylcbiAgICAgICAgbGV0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUNvb3JkLFxuICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICB0aXRsZTogZ2VvTG9jYXkubmFtZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI21hcCcpLmFwcGVuZChtYXApXG4gICAgfSk7XG5cbn1cblxuXG5iaWtlQXBwLmRpc3BsYXlEYXRhID0gZnVuY3Rpb24gKHVzZXJzSW5wdXQsIGUpIHtcblxuICAgIHZhciB1c2Vyc0lucHV0ID0gdXNlcnNJbnB1dDtcblxuICAgIGJpa2VBcHAuc3RhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGlvbiwgKSB7XG5cbiAgICAgICAgaWYgKHVzZXJzSW5wdXQgPT09IHN0YXRpb24ubmFtZSkge1xuXG4gICAgICAgICAgICAkKCcuY2hvb3NlblN0YXRpb24nKS5odG1sKGAke3N0YXRpb24ubmFtZX1gKTtcblxuICAgICAgICAgICAgJCgnLmZyZWVCaWtlcycpLmh0bWwoYCR7c3RhdGlvbi5lbXB0eV9zbG90c31gKTtcblxuICAgICAgICAgICAgJCgnLmVtcHR5U2xvdHMnKS5odG1sKGAke3N0YXRpb24uZnJlZV9iaWtlc31gKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYmlrZUFwcC5yZXNldEJ0bkZ1bmN0aW9uKCk7XG5cbn1cblxuYmlrZUFwcC5yZXNldEJ0bkZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuXG4gICAgJCgnLmZpbmRBbm90aGVyJykuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJyNsYW5kaW5nUGFnZScpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuXG4gICAgICAgICQoJyNiaWtlUmVzcG9uc2UnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIH0pO1xuXG59XG5cbnZhciBvcHRpb25zID0ge1xuICAgIGRhdGE6IFtdLFxuICAgIGxpc3Q6IHtcbiAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbiQoXCIjbWF0Y2hcIikuZWFzeUF1dG9jb21wbGV0ZShvcHRpb25zKTtcblxuXG5iaWtlQXBwLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgYmlrZUFwcC5ldmVudHMoKTtcbiAgICBiaWtlQXBwLmZvcm1FdmVudCgpO1xufTtcblxuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIGJpa2VBcHAuaW5pdCgpO1xufSk7Il19
